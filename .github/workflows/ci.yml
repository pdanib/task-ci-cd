name: ğŸŒˆ CI/CD Flow

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-test:
    name: ğŸ§© Etapa 1 â€” IntegraÃ§Ã£o ContÃ­nua (CI)
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¦ Clonando o repositÃ³rio
        uses: actions/checkout@v4

      - name: ğŸ§° Configurando Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: ğŸ“š Instalando dependÃªncias
        run: echo "SimulaÃ§Ã£o de instalaÃ§Ã£o de dependÃªncias com npm install"

      - name: ğŸ§ª Rodando testes automÃ¡ticos
        run: echo "SimulaÃ§Ã£o de testes automatizados com sucesso âœ…"

      - name: ğŸ’¬ Mensagem personalizada
        run: echo "CI concluÃ­da com sucesso ğŸš€âœ¨"

  deploy:
    name: ğŸš€ Etapa 2 â€” Entrega ContÃ­nua (CD)
    runs-on: ubuntu-latest
    needs: build-and-test

    steps:
      - name: ğŸ“¦ Clonando novamente
        uses: actions/checkout@v4

      - name: ğŸŒ Implantando site fictÃ­cio
        run: |
          echo "Iniciando deploy criativo..."
          echo "Site sendo atualizado ğŸŒ¸"
          echo "Deploy concluÃ­do com sucesso em $(date)"

      - name: ğŸ‰ Mensagem final
        run: echo "Pipeline finalizado! ParabÃ©ns! ğŸŒŸ Tudo automatizado!"

      - name: Instalar dependÃªncias
        run: npm install

      - name: Rodar testes
        run: npm test
